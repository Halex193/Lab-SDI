<h2>Movies</h2>
<div class="error">{{errorMessage}}</div>
<div class="server-side">
  <span>Server-side: </span>
  <label>Page:
    <input type="number" [(ngModel)]="page" (change)="getItems()" min="0">
  </label>
  <label>Sort:
    <select [(ngModel)]="sort" (change)="getItems()">
      <option value="id">Id</option>
      <option value="name">Name</option>
      <option value="genre">Genre</option>
      <option value="rating">Rating</option>
    </select>
  </label>
  <label>Order:
    <select [(ngModel)]="order" (change)="getItems()">
      <option value="asc">Ascending</option>
      <option value="desc">Descending</option>
    </select>
  </label>
  <label>Filter:
    <input type="text" [(ngModel)]="filter" (keyup)="getItems()">
  </label>
  <br/>
</div>
<div class="client-side">
  <span>Client-side: </span>
  <label>Sort:
    <select [(ngModel)]="sort2" (change)="getItems()">
      <option value=""></option>
      <option value="id">Id</option>
      <option value="name">Name</option>
      <option value="genre">Genre</option>
      <option value="rating">Rating</option>
    </select>
  </label>
  <label>Order:
    <select [(ngModel)]="order2" (change)="getItems()">
      <option value="asc">Ascending</option>
      <option value="desc">Descending</option>
    </select>
  </label>
  <label>Filter:
    <input type="text" [(ngModel)]="filter2" (keyup)="getItems()">
  </label>
</div>
<ul>
  <li *ngFor="let movie of items"
      (click)="onSelect(movie)">
    Id:{{movie.id}} | Name:{{movie.name}} | Genre: {{movie.genre}} | Rating:{{movie.rating}}
    <button
      [class.delete]="true"
      (click)="delete(movie);$event.stopPropagation()">X
    </button>
  </li>

</ul>
<button
  (click)="update();$event.stopPropagation()">Update
</button>
<button
  (click)="add();$event.stopPropagation()">Add
</button>
<div *ngIf="formItem">

  <div>
    <label>Id:
      <input type="number" [(ngModel)]="formItem.id" placeholder="Id" required min="0"
             #id="ngModel">
    </label>
  </div>

  <div *ngIf="id.invalid && (id.dirty || id.touched)" class="validation-error">

    <div *ngIf="id.errors.required">
      Id is required.
    </div>
    <div *ngIf="id.errors.min">
      Id must be minimum 0
    </div>
  </div>


  <div>
    <label>Name:
      <input [(ngModel)]="formItem.name" placeholder="Name" required pattern="[a-zA-Z0-9]*"
             #name="ngModel"/>
    </label>
  </div>

  <div *ngIf="name.invalid && (name.dirty || name.touched)" class="validation-error">

    <div *ngIf="name.errors.required">
      Name is required.
    </div>
    <div *ngIf="name.errors.pattern">
      Name must contain only letters and numbers
    </div>
  </div>

  <div>
    <label>Genre:
      <input [(ngModel)]="formItem.genre" placeholder="Genre" required
             #genre="ngModel"/>
    </label>
  </div>

  <div *ngIf="genre.invalid && (genre.dirty || genre.touched)" class="validation-error">

    <div *ngIf="genre.errors.required">
      Genre is required.
    </div>
  </div>

  <div>
    <label>Rating:
      <input type="number" [(ngModel)]="formItem.rating" placeholder="Id" required min="0" max="100"
             #rating="ngModel">
    </label>
  </div>

  <div *ngIf="rating.invalid && (rating.dirty || rating.touched)" class="validation-error">

    <div *ngIf="rating.errors.required">
      Rating is required.
    </div>
    <div *ngIf="rating.errors.min">
      Rating must be minimum 0
    </div>
    <div *ngIf="rating.errors.max">
      Rating must be maximum 100
    </div>
  </div>

</div>
